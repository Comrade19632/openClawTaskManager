# BE-002: API для проектов и задач (CRUD) + канбан выборка

## Контекст
Фронту нужны эндпоинты для:
- списка/создания проектов,
- списка/создания/редактирования задач в проекте,
- обновления статуса задачи (для DnD),
- получения данных доски (задачи сгруппированы по статусам или просто список).

## Acceptance Criteria («Готово»)
- Эндпоинты под `/taskManager/api/` (или текущий роутинг проекта), TokenAuth.
- Проекты:
  - `GET /projects/` → список проектов текущего пользователя.
  - `POST /projects/` → создать проект (валидировать `name`).
- Задачи:
  - `GET /projects/{id}/tasks/` → задачи проекта (только владелец имеет доступ).
  - `POST /projects/{id}/tasks/` → создать задачу (валидировать `title`, дефолтный статус = Queue).
  - `PATCH /tasks/{id}/` → редактирование (title/description/status).
- Смена статуса для DnD:
  - допускается через `PATCH /tasks/{id}/` с `status=...`.
  - при смене статуса корректно обновляется `closed_at` по правилам из BE-001.
- Ответы сериализованы в JSON и содержат необходимые поля: `id`, `project`, `title`, `description`, `status`, `source`, `closed_at`.
- Добавлены минимальные тесты на права доступа (чужие проекты/задачи недоступны).

## Как проверить
1. Получить token через Telegram login.
2. `GET /projects/` → 200, список.
3. `POST /projects/` → 201.
4. `POST /projects/{id}/tasks/` → 201.
5. `PATCH /tasks/{id}/` с изменением `status` на Done → `closed_at` выставился.
6. Попытка доступа к чужому проекту/задаче → 404 или 403 (по принятой политике).

## Риски / заметки
- Нужна консистентная политика ошибок: 404 для "not found/не ваш" часто проще для безопасности.
- Если фронт ожидает «группировку по колонкам», можно сделать на FE; на BE достаточно фильтра по статусу.
