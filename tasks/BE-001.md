# BE-001 ‚Äî –ü—Ä–æ–µ–∫—Ç—ã + –ó–∞–¥–∞—á–∏ (CRUD) + –ö–∞–Ω–±–∞–Ω —Å—Ç–∞—Ç—É—Å—ã + closed_at + TokenAuth

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
–°–ø—Ä–∏–Ω—Ç —Ç—Ä–µ–±—É–µ—Ç MVP –∫–∞–Ω–±–∞–Ω–∞:
- –ø—Ä–æ–µ–∫—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (list/create)
- –¥–æ—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞: 5 –∫–æ–ª–æ–Ω–æ–∫ (Queue / In Progress / Waiting / Today / Done)
- –∫–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–¥–∞—á: CRUD + –ø–µ—Ä–µ–Ω–æ—Å –º–µ–∂–¥—É –∫–æ–ª–æ–Ω–∫–∞–º–∏ (drag&drop –Ω–∞ FE)
- –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç–∏—è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –≤ Done/Today
- marker –∏—Å—Ç–æ—á–Ω–∏–∫–∞: badge ü§ñ –µ—Å–ª–∏ `source == "clawdbot"`
- —Ç–æ–∫–µ–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è: DRF TokenAuth –ø–æ—Å–ª–µ Telegram login

–°–µ–π—á–∞—Å –≤ API –µ—Å—Ç—å:
- `POST /auth/telegram/` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç token
- `GET /health/` –∏ `GET /me/`
–ù–æ –Ω–µ—Ç –º–æ–¥–µ–ª–µ–π/—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤/–∑–∞–¥–∞—á.

## Scope (—á—Ç–æ –¥–µ–ª–∞–µ–º)
1) –ú–æ–¥–µ–ª–∏
- `Project`:
  - `id`
  - `owner` (FK –Ω–∞ User)
  - `name` (required)
  - `description` (optional)
  - timestamps
- `Task`:
  - `id`
  - `project` (FK)
  - `title` (required)
  - `description` (optional)
  - `status` (enum: queue, in_progress, waiting, today, done)
  - `source` (string/enum; –º–∏–Ω–∏–º—É–º string)
  - `closed_at` (DateTime, null)
  - (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) `position` (int) –¥–ª—è ordering –≤–Ω—É—Ç—Ä–∏ –∫–æ–ª–æ–Ω–æ–∫ ‚Äî –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å, –Ω–æ –µ—Å–ª–∏ FE DnD –±—É–¥–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫, —ç—Ç–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è.

–õ–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è:
- –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `done` –∏–ª–∏ `today` ‚Üí –ø—Ä–æ—Å—Ç–∞–≤–ª—è—Ç—å `closed_at = now()` –µ—Å–ª–∏ —Ä–∞–Ω–µ–µ –±—ã–ª–æ null.
- –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –∏–∑ `done/today` –≤ –¥—Ä—É–≥–æ–π ‚Üí
  - –≤–∞—Ä–∏–∞–Ω—Ç A (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –¥–ª—è MVP): –Ω–µ —Ç—Ä–æ–≥–∞–µ–º `closed_at` (–∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è),
  - –≤–∞—Ä–∏–∞–Ω—Ç B: —Å–±—Ä–∞—Å—ã–≤–∞–µ–º `closed_at` –≤ null.
  –í—ã–±—Ä–∞—Ç—å –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å. –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ A.

2) API (DRF)
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: TokenAuthentication + IsAuthenticated –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
- Projects:
  - `GET /projects/` (—Ç–æ–ª—å–∫–æ —Å–≤–æ–∏)
  - `POST /projects/` (—Å–æ–∑–¥–∞—Ç—å)
- Tasks:
  - `GET /projects/:project_id/tasks/` –∏–ª–∏ `GET /tasks/?project=<id>`
  - `POST /tasks/` (project, title –æ–±—è–∑.)
  - `PATCH /tasks/:id/` (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ + —Å–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞)
  - `DELETE /tasks/:id/` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —ç—Ç–æ CRUD; –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –±–µ–∫–ª–æ–≥, –µ—Å–ª–∏ PM —Å–æ–≥–ª–∞—Å–µ–Ω)
- (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) board endpoint:
  - `GET /projects/:id/board/` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–æ –∫–æ–ª–æ–Ω–∫–∞–º (–∏–ª–∏ —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á; FE —Å–∞–º —Å–≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç).

3) –í–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –õ—é–±–æ–π –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–æ–µ–∫—Ç—É/–∑–∞–¥–∞—á–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `owner == request.user`.
- –ù–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –≤ —á—É–∂–æ–º –ø—Ä–æ–µ–∫—Ç–µ.
- `title` –Ω–µ –ø—É—Å—Ç–æ–π.
- `status` —Ç–æ–ª—å–∫–æ –∏–∑ –Ω–∞–±–æ—Ä–∞.

4) –¢–µ—Å—Ç—ã
- Unit/API tests –Ω–∞:
  - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
  - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
  - —Å–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏ + —É—Å—Ç–∞–Ω–æ–≤–∫–∞ `closed_at`
  - –∑–∞–ø—Ä–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–∂–∏–º –¥–∞–Ω–Ω—ã–º

## Acceptance Criteria (–ì–æ—Ç–æ–≤–æ)
- [ ] –í –ë–î –µ—Å—Ç—å –º–æ–¥–µ–ª–∏ Project –∏ Task, –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è.
- [ ] `GET /taskManager/api/projects/` –æ—Ç–¥–∞—ë—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- [ ] `POST /projects/` —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–µ–∫—Ç —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º `name`.
- [ ] –ï—Å—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Å–ø–∏—Å–∫–∞/—Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫ –ø—Ä–æ–µ–∫—Ç–∞–º.
- [ ] `PATCH` —Å–º–µ–Ω—ã —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ `done` –∏–ª–∏ `today` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–æ—Å—Ç–∞–≤–ª—è–µ—Ç `closed_at`.
- [ ] API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `source` –∏ `closed_at` –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏.
- [ ] –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (–∫—Ä–æ–º–µ health/auth/telegram/dev_login) —Ç—Ä–µ–±—É—é—Ç TokenAuth.
- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏ (—Å–º. –≤—ã—à–µ) –∏ –æ–Ω–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç.

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
1) –õ–æ–∫–∞–ª—å–Ω–æ –ø–æ–¥–Ω—è—Ç—å backend + –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏.
2) –ü–æ–ª—É—á–∏—Ç—å token:
   - `POST /auth/telegram/` (–∏–ª–∏ `POST /dev_login/` –Ω–∞ localhost+debug).
3) –° token:
   - `POST /projects/` ‚Üí —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç.
   - `GET /projects/` ‚Üí —É–≤–∏–¥–µ—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç.
   - `POST /tasks/` ‚Üí —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –≤ –ø—Ä–æ–µ–∫—Ç–µ.
   - `PATCH /tasks/:id/` —Å–æ —Å–º–µ–Ω–æ–π `status` –≤ `done` ‚Üí –≤ –æ—Ç–≤–µ—Ç–µ/–ø–æ—Å–ª–µ–¥—É—é—â–µ–º GET –µ—Å—Ç—å `closed_at`.
   - –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–ª—É—á–∏—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å project/task –¥—Ä—É–≥–æ–≥–æ —é–∑–µ—Ä–∞ ‚Üí 404/403.
4) –ü—Ä–æ–≥–Ω–∞—Ç—å —Ç–µ—Å—Ç—ã: `pytest`/`python manage.py test` (–∫–∞–∫ –ø—Ä–∏–Ω—è—Ç–æ –≤ —Ä–µ–ø–æ).

## –†–∏—Å–∫–∏ / –∑–∞–º–µ—Ç–∫–∏
- –ù—É–∂–Ω–æ –∑–∞—Ä–∞–Ω–µ–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è DnD (–Ω—É–∂–µ–Ω –ª–∏ ordering/position). –ï—Å–ª–∏ ordering –Ω—É–∂–µ–Ω ‚Äî –ª—É—á—à–µ —Å—Ä–∞–∑—É –¥–æ–±–∞–≤–∏—Ç—å `position` –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è reorder.
- `dev_login` —Å–µ–π—á–∞—Å –¥–æ—Å—Ç—É–ø–µ–Ω –ø—Ä–∏ `DJANGO_DEBUG=1` –∏ host=localhost ‚Üí –≤–∞–∂–Ω–æ –Ω–µ —Å–ª–æ–º–∞—Ç—å —ç—Ç–æ, –Ω–æ –∏ –Ω–µ –≤–∫–ª—é—á–∏—Ç—å –≤ –ø—Ä–æ–¥.
- –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –∫–æ–ª–æ–Ω–æ–∫ (UI —Ç–µ–∫—Å—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º, —Å—Ç–∞—Ç—É—Å—ã –≤ API ‚Äî –º–∞—à–∏–Ω–Ω—ã–µ).
